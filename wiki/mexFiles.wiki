#summary A discussion of mex files in PMTK
=== Mex ===

PMTK includes a few mex files, which are Matlab interfaces to compiled c code that can be executed as though they were regular .m files. Mex files must be generated for each type of OS. Currently we have only included 32 bit linux, and windows versions. If you are using another OS, the vast majority of PMTK should still function fine. Many 'backup' .m files exist, which are called automatically if a mex version cannot be found. 

If you run into problems, however, you may need to compile files manually. Here are some pointers. 


  * Before you run the {{{ mex }}} command for the first time, you need to type {{{ mex -setup }}} to tell Matlab what compiler to use. This only has to be done once per Matlab installation. 

  * For standalone .c or .cpp files, (which do not link to other libraries), compilation is very easy. Suppose the file is called foo.c. Change to the directory containing foo.c, using {{{ cd }}}, and then type {{{ mex foo.c }}}.

  * On newer Matlab versions, (> 2006a) you should use the {{{-largeArrayDims}}} switch to mex, which lets the mex file handle arrays larger than 2.^32. This is required when compiling on a 64 bit OS. For example, the above command would become {{{mex -largeArrayDims foo.c}}}

  * If Matlab complains that your compiler is too new(!) see [http://www.infohit.net/blog/post/alternative-gcc-compilers-on-ubuntu-intrepid-and-jaunty.html this page] on downgrading gcc on ubuntu. 

  * Some versions of Matlab do not ship with a compiler. If this is the case, you can install the visual studio express 2008 C++ compiler available for free from [http://www.microsoft.com/express/Downloads/ here]. Note, Matlab does not fully support the 2010 edition yet. 

  * Compiling on a 64 bit windows system requires additional setup, in particular, the windows [http://www.microsoft.com/downloads/en/confirmation.aspx?familyId=c17ba869-9671-4330-a63e-1fd44e0e2505&displayLang=en SDK] - see [http://www.mathworks.com/support/solutions/en/data/1-6IJJ3L/?solution=1-6IJJ3L this page] for official details. However, I had to use the instructions and files from  [http://www.mathworks.com/matlabcentral/fileexchange/22689 this] file exchange posting to get it to work. 

  * Some packages found in [http://code.google.com/p/pmtksupport/ pmtkSupport] may require custom mex commands. See their documentation for details, or look for an installation script. 

  * If you do generate mex files for another OS, please send them to us so that we can include them in for others to use. 

  * For more information on mex files, see [http://yagtom.googlecode.com/svn/trunk/html/external.html#36 this tutorial] or read the official documentation [http://www.mathworks.com/support/tech-notes/1600/1605.html here].

=== Octave ===

  * Octave now supports mex files, (as well as their own .oct interface), but we have not yet included any. One issue is that Octave uses the same mex extension, (simply .mex) for every OS making it difficult to include them for more than one platform. A solution for the future might be to have initPmtk3 automatically rename 'archived' versions depending on the detected system. The command to compile a .c file, (written as mex interface) is the same as in Matlab, (at least from within Octave): {{{ mex foo.c }}}. See [http://www.gnu.org/software/octave/doc/interpreter/Mex_002dFiles.html this page] for more details. 

=== Automatic Compilation ===

  * In the future, we may add automatic compilation support. See the [http://matlabtools.googlecode.com/svn/trunk/metaTools/compileC.m compileC.m] function for an existing basic implementation. Unfortunately, the majority of the packages in pmtkSupport require custom linking commands, and so can't simply walk over all of the .c files found calling mex. 